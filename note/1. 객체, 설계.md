# Intro.

1장 객체 설계 간단하게 요점만 정리

# 1. 티켓 판매 어플리케이션 구현하기

poor_theater 브랜치에서 구현체 참고

# 2. 무엇이 문제인가

프로그램의 목적

> 실행 중에 제대로 동작
> 변경을 위해 존재

여기선 변경을 위해 존재라는 것이 부셔진 상태

## 2.1. 예상을 빗나가는 코드

불쌍한 소극장의 문제점  

- 관람객과 판매원이 소극장의 통제를 받는 수동적 존재

이해 가능한 코드란?  

- 예상을 벗어나지 않는 코드

이해가 힘든 이유

- 세부 사항을 한꺼번에 기억하고 있어야함
- 하나의 클래스가 너무 많은 세부사항을 제어함

## 2.2. 변경에 취약한 코드

더 큰 문제는 변경에 취약하다는 것  

- 이는 객체 사이의 의존성에 관한 문제다.  

객체 지향 설계란?  

- 협력하는 객체들의 공동체를 구축하는 것

객체 사이의 의존성이 과한 경우 `결합도(coupling)`가 높다고 말한다.  

# 3. 설계 개선하기  

포인트

- 관람객이 가방을 가지고 있다는 사실과 판매원이 매표소에서 티켓을 판매한다는 사실을 소극장이 알 필요가 없다.
- 즉, 관람객과 판매원을 자율적 존재로 만드는 것이 중점이다.  

## 3.1. 자율성을 높이자  

첫 번째

- Theater의 enter 메소드에서 TicketOffice에 접근하는 코드를 TicketSeller 내부로 숨기는 것

이건 `less_poor_theater`에 있음

> 캡슐화: 개념적이나 물리적으로 객체의 내부 세부 사항을 감추는 것
> 목적: 변경하기 쉬운 객체를 만드는 것

이제 Theater는 티켓팔이가 sellTo를 이해한다는 사실만 알고 있을 뿐이다.  
소극장은 티켓팔이 인터페이스에만 의존한다. 

> 인터페이스 공개는 객체 사이의 결합도를 낮추고 변경에 용이한 코드를 작성하기 위한 가장 기본적인 설계 원칙이다.  

두 번째

- Audience에 buy를 추가하고 TicketSeller.sellTo에서 getBag을 없애는 것

## 3.2. 무엇이 개선됐는가

> Audience나 TicketSeller 내부 구현을 변경하더라도 Theater를 함께 변경할 필요가 없어짐

## 3.3. 어떻게 한 것인가

- 자기의 일은 스스로 하게 한 것임
- 객체의 자율을 높이는 방향으로 설계를 개선

## 3.4. 캡슐화와 응집도

핵심은

> 객체 내부의 상태를 캡슐화하고 객체 간 오직 메세지를 통해서만 상호작용하도록 만드는 것
> 객체의 응집도를 높이기 위해서는 객체 스스로 자신의 데이터(상태)를 책임져야 함

## 3.5. 절차지향과 객체지향

- 절차 지향: 프로세스와 데이터를 별도의 모듈에 위치시키는 방식
    - 흠.. 이 의견은 약간 비동의. 예) 리눅스 커널, 김프툴킷
    - 언어의 패러다임이 절차 지향일뿐
- 객체지향: 데이터와 프로세스가 동일한 모듈 내에 위치

변경하기 쉬운 설계 -> 한 번에 하나의 클래스만 변경 -> 클래스는 하나의 이유로 변경되어야 함

객체지향의 핵심은 캡슐화를 이용해 의존성을 관리해 결합도를 낮추는 것
객체 내부의 변경이 파급되지 않도록 제어할 수 있기 때문에 변경이 수월해짐

## 3.6. 책임의 이동

소극장에 몰려있던 책임이 개별 객체로 분산되었다. 이것이 책임의 이동이 의미하는 바이다.  
객체가 자신을 스스로 책임지는 것.  

단순히 프로세스와 데이터를 한 곳에 모으는 것 이상의 것 -> 객체에 어떤 책임을 부여하느냐에 초점

세부사항을 캡슐화 하는 것이 객체의 자율성을 높이고 응집도 높은 객체들의 공동체를 만들 수 있게 한다.  

## 3.7. 더 개선할 수 있다

귀찮아서 안함.

## 3.8. 그래 거짓말이다!

귀찮다는건 진심임.  

> 비록 현실에서 수동적인 존재라도 객체의 세상에선 능동적이다. 
> 의인화(anthropomorphism)

# 4. 객체지향 설계

네

## 4.1. 설계가 왜 필요한가

오늘 돌면서 내일 바꿀 수 있는 구조를 위해

## 4.2. 객체지향 설계

변경 가능한 코드란 이해하기 쉬운 코드  

- 직관에 위배되지 않고
- 클래스 변경이 하나의 이유로 하나만 변경되고
- 변경에 대한 파급효과 전파 스코프가 클래스로 제한되게

작성하자는 뜻

